{% extends "base.html" %}

{% block title %}HTTP Request App - Home{% endblock %}

{% block content %}
    <h2>HTTP Request Maker</h2>
    <button id="requestBtn" class="btn btn-primary">Make HTTP Request</button>
    <div id="result" class="mt-3"></div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        document.getElementById('requestBtn').addEventListener('click', async () => {
            const resultDiv = document.getElementById('result');
            try {
                const response = await axios.get('/make-request');
                if(response.data.status === 'success') {
                    resultDiv.innerHTML += `<div class="alert alert-success">Request Successful: ${JSON.stringify(response.data.data)}</div>`;
                } else {
                    resultDiv.innerHTML += `<div class="alert alert-danger">Request Failed</div>`;
                }
            } catch (error) {
                resultDiv.innerHTML += `<div class="alert alert-danger">Error: ${error.message}</div>`;
            }
        });
    </script>
{% endblock %}