{% extends "base.html" %}

{% block title %}MCN Practical - Load Balancer{% endblock %}

{% block content %}
<div class="markdown-body">
    {{ content|safe }}
</div>

<div style="height:40px"></div>

<h2>HTTP Request Maker</h2>
<button id="requestBtn" class="btn btn-primary">Make HTTP Request</button>
<div id="result" class="mt-3"></div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    document.getElementById('requestBtn').addEventListener('click', async () => {
        const resultDiv = document.getElementById('result');
        try {
            const response = await axios.get('/appConnect1');
            if(response.data.status === 'success') {
                const prettyJson = JSON.stringify(response.data.data, null, 4); // Indent with 4 spaces
                resultDiv.innerHTML += `<pre class="alert alert-success"><code>${prettyJson}</code></pre>`;
            } else {
                resultDiv.innerHTML += `<div class="alert alert-danger">Request Failed</div>`;
            }
        } catch (error) {
            resultDiv.innerHTML += `<div class="alert alert-danger">Error: ${error.message}</div>`;
        }
    });
</script>

{% endblock %}