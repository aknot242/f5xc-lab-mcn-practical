{% extends "base.html" %}

{% block content %}
<h2>Base Domain Setup</h2>
<form id="setupForm" action="{{ url_for('setup') }}" method="post">
    <div class="mb-3">
        <label for="baseUrlInput" class="form-label"></label>
        <input type="text" class="form-control" id="baseUrlInput" name="base_url" placeholder="Enter domain ending with `mcn-lab.f5-demos.com`">
    </div>
    <button type="submit" name="action" value="save" class="btn btn-primary">Save</button>
    <button type="button" onclick="clearCookie()" class="btn btn-danger">Clear Cookie</button>
</form>

<script>
function clearCookie() {
    var form = document.getElementById('setupForm');
    var input = document.getElementById('baseUrlInput');
    input.value = ''; 
    var hiddenInput = document.createElement('input');
    hiddenInput.type = 'hidden';
    hiddenInput.name = 'action';
    hiddenInput.value = 'clear';
    form.appendChild(hiddenInput);
    form.submit();  // Submit the form with the correct data
}
</script>

{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <div class="mt-3">
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}
{% endwith %}
{% endblock %}

